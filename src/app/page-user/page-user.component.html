<nav class="navbar mynav  navbar-expand-sm  navbar-dark navbar-expand-lg navbar-light"  >
  <img src="assets/images/bmci.png" class="rounded float-left navbar-brand my-image">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse  navbar-collapse " id="collapsibleNavbar">
    <ul class="navbar-nav mr-auto">
    
      <li class="nav-item">
        <a class="nav-link" routerLink="nouveauDemande">CreerDemande</a>
      </li>
      <li class="nav-item dropdown" >
        <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          GestionDemandes
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
        <!--<a class="dropdown-item" (click)="DemandeUserEnAttente()" >Demandes En attente</a>
        -->
       <a class="dropdown-item"  (click)="demandesEnattentes()" >Demandes En attente</a>
      
         <!-- <a class="dropdown-item" (click)="DemandeUserEnCours()">Demandes En Cours</a>-->
        
          <a class="dropdown-item" routerLink="demandesEncoursUser">Demandes En Cours</a>
          <!--
          <a class="dropdown-item" (click)="DemandeResolus()" >Demandes Résolues</a>
      -->
          <a class="dropdown-item" routerLink="demandesResolu">Demandes Résolues</a>

         <!-- <a class="dropdown-item" (click)="demandeNonResoluUser()">Demandes Non Résolues </a>-->
          <a class="dropdown-item" routerLink="demandesNonResolues">Demandes Non Résolues </a>
          

         <!-- <a class="dropdown-item" (click)="DemandeRejeterUser()">Demandes Rejetées</a>-->
          <a class="dropdown-item" routerLink="demandesRejeter">Demandes Rejetées</a>
          
          <div class="dropdown-divider"></div>
        <!-- <a class="dropdown-item" (click)="ConsulterHistoriqueUser()">ConsulterHistorique</a>-->
        <a class="dropdown-item" routerLink="consulterHistoriqueUser">ConsulterHistorique</a>
          
        </div>
      </li>
     

<!--      <li class="nav-item dropdown" *ngIf="webSocketAPI.demandesRejetes!=undefined && webSocketAPI.nbredemandeRejeter>0" id="chercherDmRj1" >

        <a class="nav-link dropdown-toggle"   role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" >
          DemandesRejetees      <span class="badge badge-light">{{webSocketAPI.nbredemandeRejeter}}</span>
        </a>
        <div class="dropdown-menu2" >

        <ul class="dropdown-menu " aria-labelledby="navbarDropdown" id="chercherDmRj3" >


          <li *ngFor="let d of webSocketAPI.demandesRejetes" >
          <a class="dropdown-item" (click)="Consulter(d.id_Demande,webSocketAPI.demandesRejetes.indexOf(d))"
             >{{d.id_Demande}}</a>
        </li>
          <ul class = "pagination">
            <li class = "page-item">
              <a class = "page-link" *ngIf="webSocketAPI.pagednotifier>0" href = "#">Previous</a>
              <a class = "page-link" href = "#">next</a>
            </li>
          </ul>
          <ul class="pagination" >
            <li class="pagination-item" *ngIf="webSocketAPI.pagednotifier>0"><a class="pagination-link"  (click)="PrevioussDemandeRejeter()">previous</a></li>
            <li class="pagination-item" *ngIf="webSocketAPI.pagednotifier+1<webSocketAPI.pagetotaleDNotifier" (click)="next()" ><a class="pagination-link">next</a></li>
          </ul>

  </ul>
        </div>
      </li>-->

      <li class="nav-item" *ngIf="webSocketAPI.demandesRejetes!=undefined && webSocketAPI.nbredemandeRejeter>0">
        <a class="nav-link" data-toggle="modal" data-target="#mvdr" >
         DemandesRejetees  <span class="badge badge-light">{{webSocketAPI.nbredemandeRejeter}}</span>
        </a>
       
       <!-- Modal -->
       <div class="modal fade" id="mvdr" tabindex="-1" role="dialog" aria-labelledby="mvtitle" aria-hidden="true">
         <div class="modal-dialog modal-dialog-centered" role="document">
           <div class="modal-content">
             <div class="modal-header">
               <h5 class="modal-title" id="mvtitle">List des demandes Rejeter</h5>
               <button type="button" class="close" data-dismiss="modal" id="mv" aria-label="Close">
                 <span aria-hidden="true">&times;</span>
               </button>
             </div>
             <div class="modal-body" >
               
               <ul class="list-group "  >
                 <h6 *ngIf="webSocketAPI.nbredemandeRejeter==1"> vous avez  {{webSocketAPI.nbredemandeRejeter}} demande qui a ete rejeter </h6>
                 <h6 *ngIf="webSocketAPI.nbredemandeRejeter>1"> vous avez  {{webSocketAPI.nbredemandeRejeter}} demandes  qui ont  ete rejeter </h6>
                 <p></p>
                 <div *ngFor="let d of webSocketAPI.demandesRejetes;let i=index">
                 
                   <li class="list-group-item" (click)="Consulter(d.id_Demande,webSocketAPI.demandesRejetes.indexOf(d))">
                    <a class="nav-link"  style="
                    color:black">{{i+1}}-voir les informations de la demande rejeter</a>
                     </li>
                 </div>

              
              
       
         </ul>
              
              
             </div>
             <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
               
             </div>
           </div>
         </div>
       </div>
       
       </li>
  
      <li class="nav-item ml-4" >
        <!--   <a class="nav-link" (click)="ChercherDemande()" ><span class="fa fa-search"></span></a> -->
        <a class="nav-link " routerLink="chercherDemandeUser" >Chercher<span class="fa fa-search ml-1"></span></a> 
         </li>
    


    </ul>
  </div>

  <div class="top-nav notification-row" >

    <!-- notificatoin dropdown start-->
    <ul class="nav pull-right top-menu" >

      <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle nav-link" href="#">
          <!--<span class="profile-ava">
            <img alt="" src="assets/menu/img/icons/bg-1.jpg">
         </span>-->
          <span class="user22"><i class="icon_profile"></i>{{auth.username}}</span>
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu extended logout">
          <div class="log-arrow-up"></div>

          <li>
            <a class="nav" (click)="logout()"><i class="icon_key_alt"></i> Log Out</a>
          </li>

          <li>
            <i class="icon_key_alt"></i>
          </li>
        </ul>
      </li>
      <!-- user login dropdown end -->
    </ul>
    <!-- notificatoin dropdown end-->
  </div>
</nav>
<!--
<div class="container-fluid">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " *ngIf="consulter==1 && demandechercherRejeter!=undefined">
          <div class="card-header">
            info DemandeRejeter
            <div class="widget-icons pull-right">
            <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                <a href="#" class="wclose"><i class="fa fa-times"></i></a>
              <a  class="wclose" (click)="fermerDemandeChercherRejeter()"><i class="fa fa-times"></i></a>

            </div>


          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr ><td>Etat Demande:</td><td>{{demandechercherRejeter.etat_Demande}}</td></tr>
                <tr ><td>Etat panne :</td><td>{{demandechercherRejeter.panne.etatPanne}}</td></tr>
                <tr><td>utilisateur:</td><td>{{demandechercherRejeter.utilisateurs.username}}</td></tr>
                <tr><td>email:</td><td>{{demandechercherRejeter.utilisateurs.email}}</td></tr>
                <tr><td>agence:</td><td>{{demandechercherRejeter.utilisateurs.agence.nomAgence}}</td></tr>
                <tr ><td>description:</td><td>{{demandechercherRejeter.panne.description}}
                  <tr><td><img [src]="photos"></td></tr>
                </td></tr>
              </table>-->

              <!--          <div class=container>
                           <div class="dropdown">
                             <button class="btn btn-success" data-toggle="dropdown" >Accepter</button>
                             <ul class="dropdown-menu" >
                               <li  class="dropmenu-item"><a>Intervenir vous meme</a></li>
                               <li class="dropmenu-item"><a>Affecter un  intervenant</a></li>
                             </ul>

                             <button class="btn badge-danger" (click)="DemandeRejeter(demande.id_Demande)"  >refuser</button>
                           </div>
           -->


        <!-- </div>

          </div>
        </div>
      </div>

    </div>
  </div>
</div>-->
<!--
<div class="container-fluid" *ngIf="chercher==1">
  <div class="container md ">
  <div class="card">
    <div class="card-header">

     Chercher des demandes
      <div class="widget-icons pull-right">
         <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
          <a href="#" class="wclose"><i class="fa fa-times"></i></a>
        <a (click)="fermerChercherComplet()" class="wclose"><i class="fa fa-times"></i></a>

      </div>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-sm-12 ">
          <form #ch="ngForm" (ngSubmit)="DemandeRecherche(ch.value)">
          <div class="form-group row">

            <label class="col-sm-2 col-form-label">Panne*</label>
            <div class="col-sm-10">
            <select class="custom-select  dropdown"  #mysection2 ngModel="" name="panne" [(ngModel)]="modelChercher.panne"  required  (change)="notreParentch(mysection2.value)"    [value]="modelch"   >
              <optgroup *ngIf="modechercher!=1" >
                <option [hidden]="true"></option>
                <option  class="dropdown-item" *ngFor="let m of listPanneParent"  >{{m}}</option>
              </optgroup>
              <optgroup  *ngIf="modechange==1" >
                <p></p>
                <option [hidden]="true">{{modelch}}</option>

                <option  *ngFor="let s of listSousCategories" >{{s}}</option>
              </optgroup>
            </select>
            </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Etat du  Panne*</label>
              <div class="col-sm-10">
                <select class="custom-select" ngModel="" name="etat" required="" [(ngModel)]="modelChercher.etat">
                  <option selected>Urgent</option>
                  <option value="un peu Urgent">un peu Urgent </option>

                </select>
              </div>
            </div>
            <div class="form-group row">
              <label for="example-date-input" class="col-2 col-form-label">Date</label>
              <div class="col-sm-10">
                <input class="form-control"  type="date"   ngMdel="" id="example-date-input" name="datechercher" [(ngModel)]="modelChercher.datechercher">
              </div>
            </div>
            <div class="form-group row">
              <div class="col-sm-10 mvch2">
               <button type="submit" class="btn btn-info" [disabled]="!ch.valid"><span class="fa fa-search"></span>
                 Chercher
               </button>
              </div>
            </div>





          </form>




        </div>


      </div>
<div class="row" *ngIf="achercher==1">
  <div class="col-sm-12">
    <section class="panel">
      <div class="card">
      <div class="card-header">

        Resultat du Recherche
        <div class="widget-icons pull-right">
         <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
            <a href="#" class="wclose"><i class="fa fa-times"></i></a>
          <a (click)="fermerDemandeChercher()" class="wclose"><i class="fa fa-times"></i></a>

        </div>
      </div>


      <table class="table table-striped">
        <thead>
        <tr>
          <th>Demande</th>
          <th><i class="icon_pin_alt"></i> Materiel</th>
          <th> Date</th>
            <th> <i class="icon_profile"></i> nomcomplet</th>
            <th><i class="icon_mail_alt"></i> Email </th>
          <th>panne</th>
          <th>typepanne</th>
          <th>Etatpanne</th>
          <th>EtatDemande</th>
          <th>Service</th>
          <th>Espace</th>
        </tr>
        </thead>

      <tbody>


      <tr *ngFor="let dmu of listDemandeChercher">
        <td>{{dmu.id_Demande}}</td>
        <td>{{dmu.date_Demande}}</td>
        <td>{{dmu.panne.categorie.nom}}</td>
        <td *ngIf="dmu.panne.categorie.parent!=undefined">{{dmu.panne.categorie.parent.nom}}</td>
        <td *ngIf="dmu.panne.categorie.parent==undefined">{{dmu.panne.categorie.nom}}</td>
        <td>{{dmu.panne.etatPanne}}</td>
        <td>{{dmu.etat_Demande}}</td>
        <td>{{dmu.service.nom}}</td>
        <td>
          <div class="dropdown">
            <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="icon-task-l" ></i> Espaces</a>

            <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let es of  dmu.interventions; let i = index">
              <a class="dropdown-item" (click)="consulterEspaceUser(es.espace)">Consulter Espace {{i+1}}</a>
            </div>
          </div>

        </td>
      </tr>

      </tbody>

      </table>
      <ul class="nav nav-pills dc">
        <li *ngFor='let p of totalpagechc ;let i=index' class="nav-item" >
          <a (click)="setpagechc(i,$event)" class="nav-link"
             [ngClass]="{'active':i==modelChercher.page}">
            {{i+1}}
          </a>
        </li>
      </ul>
      </div>
</section>
  </div>
</div>
    </div>
  </div>

  </div>
</div>




-->

<!--
<div class="container-fluid" *ngIf="demandenonresolu==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
            Demande Non Résolu
            <div class="widget-icons pull-right">
              <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                <a href="#" class="wclose"><i class="fa fa-times"></i></a>
              <a (click)="fermertabuserNonResolu()" class="wclose"><i class="fa fa-times"></i></a>
            </div>
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr> <th><i class="fa fa-desktop"></i> Demande</th>
                  <th><i class="icon_calendar"></i> DateDemande</th>
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>

                  <th>EtatDemande</th>
                  <th>  <i class="icon_genius"></i>Service</th>


                  <th><i class="icon_genius"></i> Espace</th></tr>
                <tr *ngFor="let dmr of demandeNonResoluesUser">
                  <td>{{dmr.id_Demande}}</td>
                  <td>{{dmr.date_Demande}}</td>
                  <td>{{dmr.panne.categorie.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent!=undefined">{{dmr.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent==undefined">{{dmr.panne.categorie.nom}}</td>
                  <td>{{dmr.panne.etatPanne}}</td>
                  <td>{{dmr.etat_Demande}}</td>
                  <td>{{dmr.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l"></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  dmr.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(esp.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                    </div>
                  </td>
                </tr>



              </table>
              <ul class="nav nav-pills dc">
                <li *ngFor='let p of totalepageDnr ;let i=index' class="nav-item" >
                  <a (click)="setpageDnr(i,$event)" class="nav-link"
                     [ngClass]="{'active':i==pageDnr}">
                    {{i+1}}
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
-->

<!--
<div class="container-fluid" *ngIf="consulterHs==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
          Votre  Historiques
            <div class="widget-icons pull-right">
             <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                <a href="#" class="wclose"><i class="fa fa-times"></i></a>
              <a (click)="fermerHistoriques()" class="wclose"><i class="fa fa-times"></i></a>

            </div>
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr> <th><i class="fa fa-desktop"></i> Demande</th>
                  <th><i class="icon_calendar"></i> DateDemande</th>
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>
                  <th>EtatDemande</th>
                  <th>  <i class="icon_genius"></i>Service</th>


                  <th><i class="icon_genius"></i> Espace</th></tr>
                <tr *ngFor="let dmu of consulterListHs">
                  <td>{{dmu.id_Demande}}</td>
                  <td>{{dmu.date_Demande}}</td>
                  <td>{{dmu.panne.categorie.nom}}</td>
                  <td *ngIf="dmu.panne.categorie.parent!=undefined">{{dmu.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmu.panne.categorie.parent==undefined">{{dmu.panne.categorie.nom}}</td>
                  <td>{{dmu.panne.etatPanne}}</td>
                  <td>{{dmu.etat_Demande}}</td>
                  <td>{{dmu.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l" ></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let es of  dmu.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(es.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                    </div>

                  </td>
                </tr>



              </table>
              <ul class="nav nav-pills dc">
                <li *ngFor='let p of totalpagehs ;let i=index' class="nav-item" >
                  <a (click)="setpageDHs(i,$event)" class="nav-link"
                     [ngClass]="{'active':i==pagehs}">
                    {{i+1}}
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>  -->
<!--
<div class="container-fluid" *ngIf="demandeEnattente==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
            Demandes en attente
            <div class="widget-icons pull-right">
                <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                <a href="#" class="wclose"><i class="fa fa-times"></i></a>
              <a (click)="fermertabuserEnAttente()" class="wclose"><i class="fa fa-times"></i></a>

            </div>
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr> <th><i class="fa fa-desktop"></i> Demande</th>
                  <th><i class="icon_calendar"></i> DateDemande</th>
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>

                  <th>EtatDemande</th>
                  <th>  <i class="icon_genius"></i>Service</th>


                <tr *ngFor="let dmr of demandeUserEnAttente">
                  <td>{{dmr.id_Demande}}</td>
                  <td>{{dmr.date_Demande}}</td>
                  <td>{{dmr.panne.categorie.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent!=undefined">{{dmr.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent==undefined">{{dmr.panne.categorie.nom}}</td>
                  <td>{{dmr.panne.etatPanne}}</td>
                  <td>{{dmr.etat_Demande}}</td>
                  <td>{{dmr.service.nom}}</td>
                 <td><button type="button" class="btn btn-success">Modifier</button>
                </td>
                <td><button type="button" class="btn btn-outline-success">Réussite</button></td>
                </tr>

              </table>
              <ul class="nav nav-pills dc">
                <li *ngFor='let p of totalpageDe ;let i=index' class="nav-item" >
                  <a (click)="setpageDE(i,$event)" class="nav-link"
                     [ngClass]="{'active':i==pageDe}">
                    {{i+1}}
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
-->
<!--
<div class="container-fluid" *ngIf="demandeUserRejeter==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
            Demande Rejeter
            <div class="widget-icons pull-right">
             <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                <a href="#" class="wclose"><i class="fa fa-times"></i></a>
              <a (click)="fermertabuserRej()" class="wclose"><i class="fa fa-times"></i></a>

            </div>
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr> <th><i class="fa fa-desktop"></i> Demande</th>
                  <th><i class="icon_calendar"></i> DateDemande</th>
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>

                  <th>EtatDemande</th>
                  <th>  <i class="icon_genius"></i>Service</th>


                  <th><i class="icon_genius"></i> Espace</th></tr>
                <tr *ngFor="let dmr of demandeRejeterUser">
                  <td>{{dmr.id_Demande}}</td>
                  <td>{{dmr.date_Demande}}</td>
                  <td>{{dmr.panne.categorie.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent!=undefined">{{dmr.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent==undefined">{{dmr.panne.categorie.nom}}</td>
                  <td>{{dmr.panne.etatPanne}}</td>
                  <td>{{dmr.etat_Demande}}</td>
                  <td>{{dmr.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" (click)="EspaceVide()">
                        <i class="icon-task-l" ></i> Espaces</a>

                 <div class="dropdown-menu" aria-labelledby="navbarDropdown" (click)="EspaceVide()" >
                       <a class="dropdown-item" >Consulter Espace </a>
                      </div>
                    </div>

                  </td>
                </tr>



              </table>
              <ul class="nav nav-pills dc">
                <li *ngFor='let p of totalPageDrj ;let i=index' class="nav-item" >
                  <a (click)="setpageDrj(i,$event)" class="nav-link"
                     [ngClass]="{'active':i==pageDrj}">
                    {{i+1}}
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>-->



<!--

<div class="container-fluid" *ngIf="dmresolu==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
            Demande Resolu
            <div class="widget-icons pull-right">
               <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                <a href="#" class="wclose"><i class="fa fa-times"></i></a>
              <a (click)="fermertabuserResolu()" class="wclose"><i class="fa fa-times"></i></a>

            </div>
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
             <tr> <th><i class="fa fa-desktop"></i> Demande</th>
               <th><i class="icon_calendar"></i> DateDemande</th>
              <th><i class="icon_mobile"></i> panne</th>
               <th><i class="icon_cogs"></i> typepanne</th>
               <th><i class="icon_piechart"></i> Etatpanne</th>
                <th>EtatDemande</th>
               <th>  <i class="icon_genius"></i>Service</th>


               <th><i class="icon_genius"></i> Espace</th></tr>
                <tr *ngFor="let dmu of demandeEncoursuser">
                  <td>{{dmu.id_Demande}}</td>
                  <td>{{dmu.date_Demande}}</td>
                  <td>{{dmu.panne.categorie.nom}}</td>
                  <td *ngIf="dmu.panne.categorie.parent!=undefined">{{dmu.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmu.panne.categorie.parent==undefined">{{dmu.panne.categorie.nom}}</td>
                  <td>{{dmu.panne.etatPanne}}</td>
                  <td>{{dmu.etat_Demande}}</td>
                  <td>{{dmu.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l"></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  dmu.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(esp.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                    </div>

                  </td>
                </tr>



              </table>
              <ul class="nav nav-pills dc">
                <li *ngFor='let p of totalPageDr ;let i=index' class="nav-item" >
                  <a (click)="setpageDr(i,$event)" class="nav-link"
                     [ngClass]="{'active':i==pageDr}">
                    {{i+1}}
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid"  *ngIf="webSocketAPI.espacesusers!=undefined && userespace==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">

      Demande EnCours
      <div class="widget-icons pull-right">
         <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
          <a href="#" class="wclose"><i class="fa fa-times"></i></a>
        <a (click)="fermertabuserEnc()" class="wclose"><i class="fa fa-times"></i></a>

      </div>
    </div>
    <div class="card-body">
      <div class="row "   >
        <div class="col-sm-12">
          <section class="panel">

            <div class="row">
              <table class="table table-striped table-advance table-hover">
                <tbody>
                <tr>
                  <th><i class="fa fa-desktop"></i> Demande</th>
                  <th><i class="icon_pin_alt"></i> Materiel</th>
                  <th><i class="icon_calendar"></i> Date</th>
                <th> <i class="icon_profile"></i> nomcomplet</th>
                  <th><i class="icon_mail_alt"></i> Email </th>
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>
                  <th> <i class="icon_genius"></i> Service</th>
                  <th> <i class="icon_genius"></i> Espace</th>
                </tr>

                <tr  *ngFor="let msn of webSocketAPI.espacesusers">
                  <td>{{msn.id_Demande}}</td>
                  <td>{{msn.date_Demande}}</td>
                  <td>{{msn.panne.categorie.nom}}</td>
                  <td *ngIf="msn.panne.categorie.parent!=undefined">{{msn.panne.categorie.parent.nom}}</td>
                  <td *ngIf="msn.panne.categorie.parent==undefined">{{msn.panne.categorie.nom}}</td>

                  <td>{{msn.panne.etatPanne}}</td>
                  <td>{{msn.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l"></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  msn.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(esp.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                 <a class="btn btn-primary" href="#"><i class="icon_plus_alt2"></i></a>
                         <a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>
                         <a class="btn btn-danger" href="#"><i class="icon_close_alt2"></i></a>
   
                      <li class="nav-item dropdown" >
                          <a class="nav-link dropdown-toggle" id="navbarDropdown2" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Espaces
                          </a>
                          <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  msn.interventions ">
                            <a class="dropdown-item" href="#">{{esp.index}}</a>
                          </div>
                        </li>
                    </div>

                  </td>

                </tr>
                </tbody>
              </table>
              <br>
              <br>
              <ul class="nav nav-pills dc">
               <li *ngFor='let p of webSocketAPI.totalPage ;let i=index' class="nav-item" >
                  <a (click)="setpage(i,$event)" class="nav-link"
                     [ngClass]="{'active':i==webSocketAPI.page}">
                    {{i+1}}
                  </a>
                </li>
             </ul>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>


</div>
</div>
</div>
</div>
<div class="container-fluid" *ngIf="espacevueuser==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">



  <div class="col-md-12 portlets">

    <div class="panel panel-default" *ngIf="webSocketAPI.espaceDemande!=undefined">
      <div class="panel-heading">
        <div class="pull-left">Message</div>
        <div class="widget-icons pull-right">
          <a (click)="fermerEspace()" class="wclose"><i class="fa fa-times"></i></a>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="panel-body" >
        <div class="padd sscroll">
          <ul class="chats" *ngFor="let mse of webSocketAPI.messagesNew" >
            <li class="by-me" >
              <div class="avatar pull-left">
           <i class="icon_profile"></i>
                <img src="assets/menu/img/user.jpg" alt="" />
              </div>
              <div >
                <div class="chat-content" >
                  <div class="chat-meta">{{mse.nom}}<span class="pull-right">{{mse.date}}</span></div>
                  {{mse.message}}.
                  <div class="clearfix"></div>
                </div>
              </div>
            </li>

            <li class="by-other" *ngIf="auth.isRespoInfo()">

              <div class="avatar pull-right">
                <img src="assets/menu/img/user22.png" alt="" />
              </div>

              <div class="chat-content mes">
                <div class="chat-meta">{{mse.date}} <span class="pull-right">{{mse.nom}}</span></div>
                {{mse.message}}. <div class="clearfix"></div>
              </div>
            </li>

          </ul>
        </div>
        <div class="widget-foot"  *ngIf="webSocketAPI.espaceDemande.etatEspace!='Fermer'">
          <form class="form-inline"  #messagesp="ngForm" (ngSubmit)="EnvoyerMessages(messagesp.value)">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Taper votre message..." ngModel=""  name="message"  [(ngModel)]="envoyerMessage.message" style="margin-left:15px">
            </div>

             <a class="btn btn-primary" href="#"><i class="icon_plus_alt2"></i></a>
              <a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>
              <a class="btn btn-danger" href="#"><i class="icon_close_alt2"></i></a>
              <button type="submit" [disabled]="!messagesp.valid" class="btn btn-info" style="margin-left:1px">Envoyer</button>
            <a class="btn btn-success" (click)="EspaceFermerInterventionResolu()"  style="margin-top: 2px;margin-left: 550px;color:white"><span class="icon_check_alt2"></span> Resolu</a>
            <a class="btn btn-danger" (click)="FermerSansResolu()"  style="margin-top: 2px;margin-left:5px;color:white"><span class="icon_target"></span> Non-Resolu</a>

          </form>

        </div>
      </div>
    </div>
  </div>
</div>
        </div>
      </div>
    </div>


   
   
<div class="container">
  <div class="row">
    <div class="col-md-12 ">

      <div class="card">
        <div class="card-header">
          <h6> Creation d'une Demande</h6>
        </div>
        <div class="card-body">
          <form #f="ngForm" (ngSubmit)="EnvoyerDemande(f.value)" enctype = "multipart / form-data">
            <div class="form-group row"  *ngIf="modepanne==1" >
              <label class="col-sm-2 col-form-label">Panne</label>
                <div class="col-sm-10">
                    <select  class="custom-select  dropdown"  #mysection ngModel name="type" [(ngModel)]="modelDemande.type"  required  (change)="notreParent(mysection.value)"  [value]="modelDemande.type"   >
                      <optgroup *ngIf="modechange!=1" >
                        <option   [hidden]="true"  ></option>
                        <option  class="dropdown-item" *ngFor="let m of listPanneParent"  >{{m}}</option>
                      </optgroup>
                      <optgroup  *ngIf="modechange==1" >
                        <p></p>
                        <option   [hidden]="true"  >{{modelDemande.type}}</option>

                          <option  *ngFor="let s of listSousCategories" >{{s}}</option>



                      </optgroup>

                    </select>



                  </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Etat du  Panne</label>
              <div class="col-sm-10">
                <select class="custom-select" ngModel="" name="etat" required="" [(ngModel)]="modelDemande.etat">
                  <option selected>Urgent</option>
                  <option value="un peu Urgent">un peu Urgent </option>

                </select>
              </div>
            </div>
            <div class="form-group row" *ngIf="modeMateriel==1" >
              <label  class="col-sm-2 col-form-label">Materiel</label>
              <div class="col-sm-10">
                <select class="custom-select" ngModel="" name="materiel" required [(ngModel)]="modelDemande.materiel">
                  <option *ngFor="let m of listMateriels"   >{{m}}</option>
                </select>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Description</label>
              <div class="col-sm-10">
                <div class="form-group green-border-focus">
                  <label for="exampleFormControlTextarea5">description du panne rencontrer</label>
                  <textarea class="form-control" id="exampleFormControlTextarea5" rows="3" ngModel="" name="description" required="" [(ngModel)]="modelDemande.description" accept="image/*"></textarea>
                </div>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Joindre ficher</label>
              <div class="col-sm-10">
                <div class="custom-file mb-3">
                  <input type="file" class="custom-file-input" id="customFile" ngModel="" name="filename" required="" (change)="onFileChanged($event)"  accept=".png, .gif, .jpeg, .jpg" >
                  <label class="custom-file-label" for="customFile">Chosir votre image</label>
                </div>

                <img [src]="modelDemande.image" height="200" alt="Image preview..." *ngIf="modelDemande.image">
              </div>
            </div>

            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Service</label>
              <div class="col-sm-10">

                <select class="custom-select" ngModel=""  name="service" required="" [(ngModel)]="modelDemande.service">
                  <option selected>Informatique</option>

                </select>
              </div>
            </div>



            <div class="form-group row">
              <div class="col-sm-10">
                <button type="submit" class="btn btn-success" [disabled]="!f.valid" id="alertEnvoyer">Envoyer</button>
              </div>
            </div>

          </form>
          
        <div class="alert alert-success alert-dismissible fade show" role="alert" *ngIf="alert==1">
             Votre demande est envoyer avec <strong>succès!</strong>.
            <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="fermerAlert()" >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <flash-messages></flash-messages>
        </div>
      </div>



    </div>


  </div>


</div>
-->

<button type="button" class="btn btn-default" aria-label="Left Align">
  <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
</button>

<app-my-loader class="mt-4"></app-my-loader>
<router-outlet></router-outlet>
