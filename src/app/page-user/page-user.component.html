<nav class="navbar mynav  navbar-expand-sm  navbar-dark navbar-expand-lg navbar-light" >
  <img src="assets/images/bmci.png" class="navbar-brand my-image">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse  navbar-collapse " id="collapsibleNavbar">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item">
        <a class="nav-link" routerLink="/user">CreerDemande</a>
      </li>
      <li class="nav-item dropdown" >
        <a class="nav-link dropdown-toggle" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          GestionDemandes
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
          <a class="dropdown-item" (click)="DemandeUserEnCours()">Demandes En Cours</a>
          <a class="dropdown-item" (click)="DemandeResolus()">Demandes RÃ©solus</a>
          <a class="dropdown-item" (click)="DemandeRejeterUser()">Demandes Rejeter</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" href="#">ConsulterHistorique</a>
        </div>
      </li>



    </ul>
  </div>

  <div class="top-nav notification-row" >

    <!-- notificatoin dropdown start-->
    <ul class="nav pull-right top-menu" >

      <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle nav-link" href="#">
          <!--<span class="profile-ava">
            <img alt="" src="assets/menu/img/icons/bg-1.jpg">
         </span>-->
          <span class="user22"><i class="icon_profile"></i>{{auth.username}}</span>
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu extended logout">
          <div class="log-arrow-up"></div>

          <li>
            <a class="nav" (click)="logout()"><i class="icon_key_alt"></i> Log Out</a>
          </li>

          <li>
            <i class="icon_key_alt"></i>
          </li>
        </ul>
      </li>
      <!-- user login dropdown end -->
    </ul>
    <!-- notificatoin dropdown end-->
  </div>
</nav>
<div class="container-fluid" *ngIf="demandeUserRejeter==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
            Demande Rejeter
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr> <th><i class="fa fa-desktop"></i> Demande</th>
                  <th><i class="icon_calendar"></i> DateDemande</th>
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>

                  <th>EtatDemande</th>
                  <th>  <i class="icon_genius"></i>Service</th>


                  <th><i class="icon_genius"></i> Espace</th></tr>
                <tr *ngFor="let dmr of demandeRejeterUser">
                  <td>{{dmr.id_Demande}}</td>
                  <td>{{dmr.date_Demande}}</td>
                  <td>{{dmr.panne.categorie.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent!=undefined">{{dmr.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmr.panne.categorie.parent==undefined">{{dmr.panne.categorie.nom}}</td>
                  <td>{{dmr.panne.etatPanne}}</td>
                  <td>{{dmr.etat_Demande}}</td>
                  <td>{{dmr.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l"></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  dmr.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(esp.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                    </div>

                  </td>
                </tr>



              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="container-fluid" *ngIf="dmresolu==1">
  <div class="container md ">
    <div class="row">
      <div class="col-md-12 ">
        <div class="card " >
          <div class="card-header">
            Demande Resolu
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
             <tr> <th><i class="fa fa-desktop"></i> Demande</th>
               <th><i class="icon_calendar"></i> DateDemande</th>
              <th><i class="icon_mobile"></i> panne</th>
               <th><i class="icon_cogs"></i> typepanne</th>
               <th><i class="icon_piechart"></i> Etatpanne</th>
                <th>EtatDemande</th>
               <th>  <i class="icon_genius"></i>Service</th>


               <th><i class="icon_genius"></i> Espace</th></tr>
                <tr *ngFor="let dmu of demandeEncoursuser">
                  <td>{{dmu.id_Demande}}</td>
                  <td>{{dmu.date_Demande}}</td>
                  <td>{{dmu.panne.categorie.nom}}</td>
                  <td *ngIf="dmu.panne.categorie.parent!=undefined">{{dmu.panne.categorie.parent.nom}}</td>
                  <td *ngIf="dmu.panne.categorie.parent==undefined">{{dmu.panne.categorie.nom}}</td>
                  <td>{{dmu.panne.etatPanne}}</td>
                  <td>{{dmu.etat_Demande}}</td>
                  <td>{{dmu.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l"></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  dmu.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(esp.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                    </div>

                  </td>
                </tr>



              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row mvms2">
  <div class="col-sm-11">
<div class="container-fluid" *ngIf="webSocketAPI.espacesusers!=undefined && this.userespace==1">

  <div class="card foot">
    <div class="card-header">
      Demande EnCours
    </div>
    <div class="card-body">
      <div class="row "   >
        <div class="col-sm-12">
          <section class="panel">

            <div class="row">
              <table class="table table-striped table-advance table-hover">
                <tbody>
                <tr>
                  <th><i class="fa fa-desktop"></i> Demande</th>
                  <!--<th><i class="icon_pin_alt"></i> Materiel</th>-->
                  <th><i class="icon_calendar"></i> Date</th>
                <!--  <th> <i class="icon_profile"></i> nomcomplet</th>
                  <th><i class="icon_mail_alt"></i> Email </th>-->
                  <th><i class="icon_mobile"></i> panne</th>
                  <th><i class="icon_cogs"></i> typepanne</th>
                  <th><i class="icon_piechart"></i> Etatpanne</th>
                  <th> <i class="icon_genius"></i> Service</th>
                  <th> <i class="icon_genius"></i> Espace</th>
                </tr>

                <tr  *ngFor="let msn of webSocketAPI.espacesusers">
                  <td>{{msn.id_Demande}}</td>
                  <td>{{msn.date_Demande}}</td>
                  <td>{{msn.panne.categorie.nom}}</td>
                  <td *ngIf="msn.panne.categorie.parent!=undefined">{{msn.panne.categorie.parent.nom}}</td>
                  <td *ngIf="msn.panne.categorie.parent==undefined">{{msn.panne.categorie.nom}}</td>

                  <td>{{msn.panne.etatPanne}}</td>
                  <td>{{msn.service.nom}}</td>
                  <td>
                    <div class="dropdown">
                      <a class="nav-link dropdown-toggle" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="icon-task-l"></i> Espaces</a>

                      <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  msn.interventions; let i = index">
                        <a class="dropdown-item" (click)="consulterEspaceUser(esp.espace)">Consulter Espace {{i+1}}</a>
                      </div>
                      <!--     <a class="btn btn-primary" href="#"><i class="icon_plus_alt2"></i></a>
                         <a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>
                         <a class="btn btn-danger" href="#"><i class="icon_close_alt2"></i></a>
   -->
                      <!--  <li class="nav-item dropdown" >
                          <a class="nav-link dropdown-toggle" id="navbarDropdown2" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Espaces
                          </a>
                          <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngFor="let esp of  msn.interventions ">
                            <a class="dropdown-item" href="#">{{esp.index}}</a>
                          </div>
                        </li>-->
                    </div>

                  </td>

                </tr>
                </tbody>
              </table>
            </div>
          </section>
        </div>
      </div>
    </div>
  </div>


</div>
</div>
</div>
<div class="row mvms" *ngIf="espacevueuser==1" >
  <div class="col-md-10 portlets">

    <div class="panel panel-default" *ngIf="webSocketAPI.espaceDemande!=undefined">
      <div class="panel-heading">
        <div class="pull-left">Message</div>
        <div class="widget-icons pull-right">
          <a (click)="fermerEspace()" class="wclose"><i class="fa fa-times"></i></a>
        </div>
        <div class="clearfix"></div>
      </div>
      <div class="panel-body" >
        <div class="padd sscroll">
          <ul class="chats" *ngFor="let mse of webSocketAPI.messagesNew" >
            <li class="by-me" >
              <div class="avatar pull-left">
              <!--  <i class="icon_profile"></i>-->
                <img src="assets/menu/img/user.jpg" alt="" />
              </div>
              <div >
                <div class="chat-content" >
                  <div class="chat-meta">{{mse.nom}}<span class="pull-right">{{mse.date}}</span></div>
                  {{mse.message}}.
                  <div class="clearfix"></div>
                </div>
              </div>
            </li>
<!--
            <li class="by-other" *ngIf="auth.isRespoInfo()">

              <div class="avatar pull-right">
                <img src="assets/menu/img/user22.png" alt="" />
              </div>

              <div class="chat-content mes">
                <div class="chat-meta">{{mse.date}} <span class="pull-right">{{mse.nom}}</span></div>
                {{mse.message}}. <div class="clearfix"></div>
              </div>
            </li>
-->
          </ul>
        </div>
        <div class="widget-foot"  *ngIf="webSocketAPI.espaceDemande.etatEspace!='Fermer'">
          <form class="form-inline"  #messagesp="ngForm" (ngSubmit)="EnvoyerMessages(messagesp.value)">
            <div class="form-group">
              <input type="text" class="form-control" placeholder="Taper votre message..." ngModel=""  name="message"  [(ngModel)]="envoyerMessage.message">
            </div>

             <!--<a class="btn btn-primary" href="#"><i class="icon_plus_alt2"></i></a>
              <a class="btn btn-success" href="#"><i class="icon_check_alt2"></i></a>
              <a class="btn btn-danger" href="#"><i class="icon_close_alt2"></i></a>-->
              <button type="submit" [disabled]="!messagesp.valid" class="btn btn-info">Envoyer</button>
            <a class="btn btn-success" (click)="EspaceFermerInterventionResolu()"  style="margin-top: 15px;margin-left: 55px"><span class="icon_mic_alt"></span>Resolu</a>
            <a class="btn btn-danger" (click)="FermerSansResolu()"  style="margin-top: 15px"><span class="icon_target"></span>Non-Resolu</a>

          </form>

        </div>
      </div>
    </div>
  </div>
</div>
    <p></p>
<div class="container">
  <div class="row">
    <div class="col-md-12 ">

      <div class="card">
        <div class="card-header">
          Creation d'une Demande
        </div>
        <div class="card-body">
          <form #f="ngForm" (ngSubmit)="EnvoyerDemande(f.value)" enctype = "multipart / form-data">
            <div class="form-group row"  *ngIf="modepanne==1" >
              <label class="col-sm-2 col-form-label">Type Panne</label>
                <div class="col-sm-10">
                    <select class="custom-select  dropdown"  #mysection ngModel name="type" [(ngModel)]="modelDemande.type"  required  (change)="notreParent(mysection.value)"  [value]="modelDemande.type"   >
                      <optgroup *ngIf="modechange!=1" >
                        <option  class="dropdown-item" *ngFor="let m of listPanneParent"  >{{m}}</option>
                      </optgroup>
                      <optgroup  *ngIf="modechange==1" >
                        <p></p>
                        <option   [hidden]="true"  >{{modelDemande.type}}</option>

                          <option  *ngFor="let s of listSousCategories" >{{s}}</option>



                      </optgroup>

                    </select>



                  </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Etat du  Panne</label>
              <div class="col-sm-10">
                <select class="custom-select" ngModel="" name="etat" required="" [(ngModel)]="modelDemande.etat">
                  <option selected>Urgent</option>
                  <option value="1">un peu Urgent </option>

                </select>
              </div>
            </div>
            <div class="form-group row" *ngIf="modeMateriel==1" >
              <label  class="col-sm-2 col-form-label">Materiel</label>
              <div class="col-sm-10">
                <select class="custom-select" ngModel="" name="materiel" required [(ngModel)]="modelDemande.materiel">
                  <option *ngFor="let m of listMateriels"   >{{m}}</option>
                </select>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Description</label>
              <div class="col-sm-10">
                <div class="form-group green-border-focus">
                  <label for="exampleFormControlTextarea5">description du panne rencontrer</label>
                  <textarea class="form-control" id="exampleFormControlTextarea5" rows="3" ngModel="" name="description" required="" [(ngModel)]="modelDemande.description" accept="image/*"></textarea>
                </div>
              </div>
            </div>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Joindre ficher</label>
              <div class="col-sm-10">
                <div class="custom-file mb-3">
                  <input type="file" class="custom-file-input" id="customFile" ngModel="" name="filename" required="" (change)="onFileChanged($event)"  accept=".png, .gif, .jpeg, .jpg">
                  <label class="custom-file-label" for="customFile">Chosir votre image</label>
                </div>

                <img [src]="modelDemande.image" height="200" alt="Image preview..." *ngIf="modelDemande.image">
              </div>
            </div>

            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Service</label>
              <div class="col-sm-10">
                <select class="custom-select" ngModel="" name="service" required="" [(ngModel)]="modelDemande.service">
                  <option selected>Informatique</option>
                  <option value="comptabiliter">comptabiliter</option>

                </select>
              </div>
            </div>



            <div class="form-group row">
              <div class="col-sm-10">
                <button type="submit" class="btn btn-success" [disabled]="!f.valid">Envoyer</button>
              </div>
            </div>

          </form>


        </div>
      </div>



    </div>


  </div>


</div>

<button type="button" class="btn btn-default" aria-label="Left Align">
  <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
</button>



