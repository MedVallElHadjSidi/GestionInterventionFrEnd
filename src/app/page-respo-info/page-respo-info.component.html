

<nav class="navbar mynav  navbar-expand-sm  navbar-dark navbar-expand-lg navbar-light"  >
  <img src="assets/images/bmci.png" class="navbar-brand my-image">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse  navbar-collapse " id="collapsibleNavbar">
    <ul class="navbar-nav mr-auto">


      <li class="nav-item" >
        <a class="nav-link" href="#">TableauBord</a>
      </li>
      <li class="nav-item" *>
        <a class="nav-link" href="#">ServicesEnCours</a>
      </li>

      <!-- <li class="nav-item dropdown" *ngIf="authService.isRespoInfo() ">
         <a class="nav-link dropdown-toggle"  role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" (click)="NouveauxDemande()">
           Notification
         </a>

         <div class="dropdown-menu" aria-labelledby="navbarDropdown" *ngIf="authService.isrespo==true ">
           <a class="dropdown-item"  *ngFor="let n of nouveauxDemandes"  (click)="Consulter(n.id_Demande)">Message {{n.panne.etatPanne}} de <span>{{n.utilisateurs.username}}</span> de  {{n.utilisateurs.agence.nomAgence}} <br>
             Adresse :{{n.utilisateurs.agence.adresse.wilaye}},{{n.utilisateurs.agence.adresse.aommune}},{{n.utilisateurs.agence.adresse.ville}},{{n.utilisateurs.agence.adresse.rue}}
           </a>

         </div>
       </li>-->
    </ul>

  </div>





  <div class="top-nav notification-row" >

    <!-- notificatoin dropdown start-->
    <ul class="nav pull-right top-menu" >

      <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle nav-link" href="#">
          <!--<span class="profile-ava">
            <img alt="" src="assets/menu/img/icons/bg-1.jpg">
         </span>-->
          <span class="user22"><i class="icon_profile"></i>{{auth.username}}</span>
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu extended logout">
          <div class="log-arrow-up"></div>

          <li>
            <a class="nav" (click)="logout()"><i class="icon_key_alt"></i> Log Out</a>
          </li>

          <li>
            <i class="icon_key_alt"></i>
          </li>
        </ul>
      </li>
      <!-- user login dropdown end -->
    </ul>
    <!-- notificatoin dropdown end-->

    <ul class="nav pull-right top-menu me" >
      <li id="mail_notificatoin_bar" class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">
          <i class="oi oi-bell"></i>
          <span class="badge bg-important mv">{{webSocket.nbredemessage}}</span>
        </a>
        <ul class="dropdown-menu extended inbox" >
          <div class="notify-arrow notify-arrow-blue"></div>
          <li>
            <p class="blue">vous avez {{webSocket.nbredemessage}} nouveaux messages</p>
          </li>
          <li *ngFor="let n of webSocket.nouveauxDemandes">
            <a (click)="Consulter(n.id_Demande,webSocket.nouveauxDemandes.indexOf(n))">
              <span class="label label-primary"><i class="icon_profile"></i></span>
              Demande {{n.panne.etatPanne}} de <span>{{n.utilisateurs.username}}</span> de  {{n.utilisateurs.agence.nomAgence}}
              <span class="small italic pull-right">5min</span>
            </a>
          </li>




        </ul>
    </ul>
  </div>

</nav>


<!--
<footer class="page-footer font-small blue" *ngIf="!authService.isAdmin()">


  <div class="footer-copyright text-center py-3">©  Tous droits réservés BMCI {{date | date :'yyyy'}}.

  </div>


</footer>
-->

<div class="container-fluid">
  <div class="container md ">
    <div class="row">
      <div class="col-md-8 ">
        <div class="card " *ngIf="consulter==1 && demande!=undefined">
          <div class="card-header">
            info Demande
          </div>
          <div class="card-body">

            <div class="container "  >
              <table class="table table-bordered " >
                <tr ><td>Etat Demande:</td><td>{{demande.etat_Demande}}</td></tr>
                <tr ><td>Etat panne :</td><td>{{demande.panne.etatPanne}}</td></tr>

                <tr ><td>description:</td><td>{{demande.panne.description}}</td></tr>
                <tr><td>image:</td><td><img [src]="photos"  class="img-thumbnail" /></td></tr>

              </table>
              <center>  <div class="btn-group">
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                  Accepter
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" (click)="espaceRespp(demande.id_Demande)">via espce</a>
                  <a class="dropdown-item" href="#">Via Intervenant</a>
                </div>
              </div>
                <div class="btn-group">
                  <button type="button" class="btn badge-danger  btn-space" (click)="DemandeRejeter(demande.id_Demande)" >Refuser</button>
                </div></center>

              <!--          <div class=container>
                           <div class="dropdown">
                             <button class="btn btn-success" data-toggle="dropdown" >Accepter</button>
                             <ul class="dropdown-menu" >
                               <li  class="dropmenu-item"><a>Intervenir vous meme</a></li>
                               <li class="dropmenu-item"><a>Affecter un  intervenant</a></li>
                             </ul>

                             <button class="btn badge-danger" (click)="DemandeRejeter(demande.id_Demande)"  >refuser</button>
                           </div>
           -->


            </div>

          </div>
        </div>
      </div>

    </div>
  </div>






  <div class="row" *ngIf="consulter==0 && espaceinter==1">
    <div class="col-md-4 portlets">
      <!-- Widget -->
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="pull-left">Message</div>
          <div class="widget-icons pull-right">
            <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
            <a href="#" class="wclose"><i class="fa fa-times"></i></a>
          </div>
          <div class="clearfix"></div>
        </div>

        <div class="panel-body">
          <!-- Widget content -->
          <div class="padd sscroll">

            <ul class="chats">

              <!-- Chat by us. Use the class "by-me". -->
              <li class="by-me">
                <!-- Use the class "pull-left" in avatar -->
                <div class="avatar pull-left">
                  <img src="img/user.jpg" alt="" />
                </div>

                <div class="chat-content">
                  <!-- In meta area, first include "name" and then "time" -->
                  <div class="chat-meta">John Smith <span class="pull-right">3 hours ago</span></div>
                  Vivamus diam elit diam, consectetur dapibus adipiscing elit.
                  <div class="clearfix"></div>
                </div>
              </li>

              <!-- Chat by other. Use the class "by-other". -->
              <li class="by-other">
                <!-- Use the class "pull-right" in avatar -->
                <div class="avatar pull-right">
                  <img src="img/user22.png" alt="" />
                </div>

                <div class="chat-content">
                  <!-- In the chat meta, first include "time" then "name" -->
                  <div class="chat-meta">3 hours ago <span class="pull-right">Jenifer Smith</span></div>
                  Vivamus diam elit diam, consectetur fconsectetur dapibus adipiscing elit.
                  <div class="clearfix"></div>
                </div>
              </li>

              <li class="by-me">
                <div class="avatar pull-left">
                  <img src="img/user.jpg" alt="" />
                </div>

                <div class="chat-content">
                  <div class="chat-meta">John Smith <span class="pull-right">4 hours ago</span></div>
                  Vivamus diam elit diam, consectetur fermentum sed dapibus eget, Vivamus consectetur dapibus adipiscing elit.
                  <div class="clearfix"></div>
                </div>
              </li>

              <li class="by-other">
                <!-- Use the class "pull-right" in avatar -->
                <div class="avatar pull-right">
                  <img src="img/user22.png" alt="" />
                </div>

                <div class="chat-content">
                  <!-- In the chat meta, first include "time" then "name" -->
                  <div class="chat-meta">3 hours ago <span class="pull-right">Jenifer Smith</span></div>
                  Vivamus diam elit diam, consectetur fermentum sed dapibus eget, Vivamus consectetur dapibus adipiscing elit.
                  <div class="clearfix"></div>
                </div>
              </li>



              <li class="by-other">
                <!-- Use the class "pull-right" in avatar -->
                <div class="avatar pull-right" >
                  <img src="img/user22.png" alt="" />
                </div>

                <div class="chat-content"*ngIf="webSocket.messagesNew!=undefined">
                  <!-- In the chat meta, first include "time" then "name" -->
                  <div class="chat-meta" *ngFor="let msg of webSocket.messagesNew ">{{msg.date}} <span class="pull-right">{{msg.nom}}</span></div>
                  {{msg.message}}<div class="clearfix"></div>
                </div>
              </li>

            </ul>

          </div>
          <!-- Widget footer -->
          <div class="widget-foot">

            <form class="form-inline"  #message="ngForm" (ngSubmit)="EnvoyerMessage(message.value)">
              <div class="form-group">
                <input type="text" class="form-control" placeholder="Type your message here..."  ngModel=""  name="message"  [(ngModel)]="envoyerMessage.message">
              </div>
              <button type="submit" [disabled]="!message.valid" class="btn btn-info">Send</button>
            </form>


          </div>
        </div>


      </div>
    </div>


  </div>


</div>
